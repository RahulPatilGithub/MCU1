/*
 * stm32f446xx.h
 *
 *  Created on: May 2, 2021
 *      Author: rgp03
 */

#ifndef INC_STM32F446XX_H_
#define INC_STM32F446XX_H_

#include <stdint.h>

/* Base Addresses of Flash and SRAM memories */
#define FLASH_BASEADDR							0x08000000U		/* 512KB */
#define SRAM1_BASEADDR							0x20000000U		/* 112KB */
#define SRAM2_BASEADDR							0x2001C000U		/* 16KB */
#define ROM										0x1FFF0000U
#define SRAM 									SRAM1_BASEADDR

/* AHBx and APBx Bus Peripheral base addresses*/

#define PERIPH_BASE								0x40000000U
#define APB1PERIPH_BASE							0x40000000U
#define APB2PERIPH_BASE							0x40010000U
#define AHB1PERIPH_BASE							0x40020000U
#define AHB2PERIPH_BASE							0x50000000U
#define AHB3PERIPH_BASE							0xA0000000U

/* AHB1 Peripheral Addresses*/
#define GPIOA_BASEADDR							(AHB1PERIPH_BASE + 0x0000U)	/* 0x40020000U */
#define GPIOB_BASEADDR							(AHB1PERIPH_BASE + 0x0400U)	/* 0x40020400U */
#define GPIOC_BASEADDR							(AHB1PERIPH_BASE + 0x0800U)	/* 0x40020800U */
#define GPIOD_BASEADDR							(AHB1PERIPH_BASE + 0x0C00U)	/* 0x40020C00U */
#define GPIOE_BASEADDR							(AHB1PERIPH_BASE + 0x1000U)	/* 0x40021000U */
#define GPIOF_BASEADDR							(AHB1PERIPH_BASE + 0x1400U)	/* 0x40021400U */
#define GPIOG_BASEADDR							(AHB1PERIPH_BASE + 0x1800U)	/* 0x40021800U */
#define GPIOH_BASEADDR							(AHB1PERIPH_BASE + 0x1C00U)	/* 0x40021C00U */

#define RCC_BASEADDR							(AHB1PERIPH_BASE + 0x3800U)	/* 0x40023800U */

/* APB1 Peripheral Addresses */
#define I2C1_BASEADDR							(APB1PERIPH_BASE + 0x5400U)
#define I2C2_BASEADDR							(APB1PERIPH_BASE + 0x5800U)
#define I2C3_BASEADDR							(APB1PERIPH_BASE + 0x5C00U)

#define SPI2_BASEADDR							(APB1PERIPH_BASE + 0x3800U)
#define SPI3_BASEADDR							(APB1PERIPH_BASE + 0x3C00U)

#define USART2_BASEADDR							(APB1PERIPH_BASE + 0x4400U)
#define USART3_BASEADDR							(APB1PERIPH_BASE + 0x4800U)
#define UART4_BASEADDR							(APB1PERIPH_BASE + 0x4C00U)
#define UART5_BASEADDR							(APB1PERIPH_BASE + 0x5000U)

/* APB2 Peripheral Addresses */
#define SPI1_BASEADDR							(APB2PERIPH_BASE + 0x3000)

#define USART1_BASEADDR							(APB2PERIPH_BASE + 0x1000U)
#define USART6_BASEADDR							(APB2PERIPH_BASE + 0x1400U)

#define EXTI_BASEADDR							(APB2PERIPH_BASE + 0x3C00U)

#define SYSCFG_BASEADDR							(APB2PERIPH_BASE + 0x3800U)

/* Peripheral Definition */
#define GPIOA									((GPIO_RegDef_t *)GPIOA_BASEADDR)
#define GPIOB									((GPIO_RegDef_t *)GPIOB_BASEADDR)
#define GPIOC									((GPIO_RegDef_t *)GPIOC_BASEADDR)
#define GPIOD									((GPIO_RegDef_t *)GPIOD_BASEADDR)
#define GPIOE									((GPIO_RegDef_t *)GPIOE_BASEADDR)
#define GPIOF									((GPIO_RegDef_t *)GPIOF_BASEADDR)
#define GPIOG									((GPIO_RegDef_t *)GPIOG_BASEADDR)
#define GPIOH									((GPIO_RegDef_t *)GPIOH_BASEADDR)

#define RCC										((RCC_RegDef_t *)RCC_BASEADDR)

#define EXTI									((EXTI_RegDef_t *)EXTI_BASEADDR)

#define SYSCFG                                  ((SYSCFG_RegDef_t *)SYSCFG_BASEADDR)

/* Bare Metal Includes */
#include "gpio.h"
#include "rcc.h"
#include "exti.h"
#include "syscfg.h"

/* Generic Macros*/
#define ENABLE									1U
#define DISABLE									0U
#define SET										ENABLE
#define RESET									DISABLE
#define GPIO_PIN_SET							SET
#define GPIO_PIN_RESET							RESET

#define EXTI_PORTA_PIN_SEL                  0U    /* 0000: PA[x] pin */
#define EXTI_PORTA_PIN_SEL                  1U    /* 0001: PB[x] pin */
#define EXTI_PORTC_PIN_SEL                  2U    /* 0010: PC[x] pin */
#define EXTI_PORTD_PIN_SEL                  3U    /* 0011: PD[x] pin */
#define EXTI_PORTE_PIN_SEL                  4U    /* 0100: PE[x] pin */
#define EXTI_PORTF_PIN_SEL                  5U    /* 0101: PF[x] pin */
#define EXTI_PORTG_PIN_SEL                  6U    /* 0110: PG[x] pin */
#define EXTI_PORTH_PIN_SEL                  7U    /* 0111: PH[x] pin */

#define GPIO_BASEADDR_TO_CODE(x)            ( (x == GPIOA) ? EXTI_PORTA_PIN_SEL :\
                                              (x == GPIOB) ? EXTI_PORTB_PIN_SEL :\
                                              (x == GPIOC) ? EXTI_PORTC_PIN_SEL :\
                                              (x == GPIOD) ? EXTI_PORTD_PIN_SEL :\
                                              (x == GPIOE) ? EXTI_PORTE_PIN_SEL :\
                                              (x == GPIOF) ? EXTI_PORTF_PIN_SEL :\
                                              (x == GPIOG) ? EXTI_PORTG_PIN_SEL : EXTI_PORTH_PIN_SEL )

#endif /* INC_STM32F446XX_H_ */
